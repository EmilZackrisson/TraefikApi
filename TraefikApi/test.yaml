http:
  routers:
    emilzackrisson-se:
      EntryPoints:
        - websecure-external
      Rule: Host(`emilzackrisson.se`)
      Middlewares:
        - emilzackrisson-se-redirect
      Service: home
    authentik:
      EntryPoints:
        - websecure-external
      Rule: Host(`auth.emilzackrisson.se`
      Middlewares:
        - authentik
      Service: authentik-kubernetes
    code-server-unraid:
      EntryPoints:
        - websecure-internal
      Rule: Host(`code.unraid.local.emilzackrisson.se`)
      Middlewares:
        - authentik
        - admin-ipwhitelist
      Service: code-server-unraid
      Tls:
        CertResolver: letsencrypt
    technitium:
      EntryPoints:
        - websecure-internal
      Rule: Host(`technitium.local.emilzackrisson.se`)
      Middlewares:
        - authentik
        - admin-ipwhitelist
      Service: technitium
    filebrowser:
      EntryPoints:
        - websecure-internal
      Rule: Host(`filebrowser.local.emilzackrisson.se`)
      Middlewares:
        - authentik
        - admin-ipwhitelist
      Service: filebrowser
    home-assistant:
      EntryPoints:
        - websecure-internal
        - websecure-external
      Rule: Host(`ha.local.emilzackrisson.se`) || Host(`ha.emilzackrisson.se`)
      Service: home-assistant
    nextcloud-int:
      EntryPoints:
        - websecure-internal
      Rule: Host(`nextcloud.local.emilzackrisson.se`)
      Middlewares:
        - nextcloud-redirect
        - nextcloud-middlewares-secure-headers
      Service: nextcloud
    nextcloud-ext:
      EntryPoints:
        - websecure-external
      Rule: Host(`nextcloud.emilzackrisson.se`)
      Middlewares:
        - nextcloud-redirect
        - nextcloud-middlewares-secure-headers
      Service: nextcloud
    qbittorrent:
      EntryPoints:
        - websecure-internal
      Rule: Host(`tor.local.emilzackrisson.se`)
      Middlewares:
        - authentik
        - admin-ipwhitelist
      Service: qbittorrent
    prx:
      EntryPoints:
        - websecure-internal
      Rule: Host(`prx.local.emilzackrisson.se`)
      Middlewares:
        - admin-ipwhitelist
      Service: prx
    portainer:
      EntryPoints:
        - websecure-internal
      Rule: Host(`portainer.local.emilzackrisson.se`)
      Middlewares:
        - portainer-redirect
        - admin-ipwhitelist
      Service: portainer
    prowlarr:
      EntryPoints:
        - websecure-internal
      Rule: Host(`prowlarr.local.emilzackrisson.se`)
      Middlewares:
        - authentik
      Service: prowlarr
    immich:
      EntryPoints:
        - websecure-internal
      Rule: Host(`immich.local.emilzackrisson.se`)
      Middlewares:
        - maintenance
      Service: immich
    filer:
      EntryPoints:
        - websecure-external
      Rule: Host(`filer.emilzackrisson.se`)
      Middlewares:
        - authentik
      Service: dufs
    filer-local:
      EntryPoints:
        - websecure-internal
      Rule: Host(`filer.local.emilzackrisson.se`)
      Middlewares:
        - authentik
      Service: dufs
    home:
      EntryPoints:
        - websecure-external
      Rule: Host(`home.emilzackrisson.se`)
      Middlewares:
        - authentik
      Service: home
    radarr:
      EntryPoints:
        - websecure-external
      Rule: Host(`radarr.emilzackrisson.se`)
      Middlewares:
        - authentik
        - radarr-theme
      Service: radarr
    sonarr:
      EntryPoints:
        - websecure-external
      Rule: Host(`sonarr.emilzackrisson.se`)
      Middlewares:
        - authentik
        - sonarr-theme
      Service: sonarr
    traefik:
      EntryPoints:
        - websecure-internal
      Rule: Host(`traefik.local.emilzackrisson.se`)
      Middlewares:
        - authentik
        - admin-ipwhitelist
      Service: api@internal
    bazarr:
      EntryPoints:
        - websecure-external
      Rule: Host(`bazarr.emilzackrisson.se`)
      Middlewares:
        - authentik
      Service: bazarr
    whoami:
      EntryPoints:
        - websecure-internal
      Rule: Host(`whoami.local.emilzackrisson.se`)
      Middlewares:
        - admin-ipwhitelist
      Service: whoami
    whoami-external:
      EntryPoints:
        - websecure-external
      Rule: Host(`whoami.emilzackrisson.se`)
      Middlewares:
        - authentik
      Service: whoami
    calibre-web:
      EntryPoints:
        - websecure-external
      Rule: Host(`books.emilzackrisson.se`)
      Middlewares:
        - authentik
      Service: calibre-web
    penpot:
      EntryPoints:
        - websecure-internal
      Rule: Host(`penpot.local.emilzackrisson.se`)
      Service: penpot
    infisical:
      EntryPoints:
        - websecure-internal
      Rule: Host(`infisical.local.emilzackrisson.se`)
      Service: infisical
    cockpit-docker:
      EntryPoints:
        - websecure-internal
      Rule: Host(`cockpit.docker-prod.local.emilzackrisson.se`)
      Middlewares:
        - admin-ipwhitelist
      Service: cockpit-docker
      Tls:
        CertResolver: letsencrypt
    lyckebyansfvo:
      EntryPoints:
        - websecure-external
      Rule: Host(`lyckebyansfvo.emilzackrisson.se`)
      Service: lyckebyansfvo
    powerdns-admin:
      EntryPoints:
        - websecure-internal
      Rule: Host(`pdns.local.emilzackrisson.se`)
      Middlewares:
        - admin-ipwhitelist
      Service: powerdns-admin
  services:
    authentik-kubernetes:
      loadBalancer:
        passHostHeader: true
        servers:
          - url: https://10.10.0.58:9443
    code-server-unraid:
      loadBalancer:
        servers:
          - url: http://10.10.0.20:8443
    technitium:
      loadBalancer:
        servers:
          - url: http://10.10.0.3:5380
    filebrowser:
      loadBalancer:
        servers:
          - url: http://10.10.0.20:8080
    home-assistant:
      loadBalancer:
        servers:
          - url: http://10.10.0.21:8119
    nextcloud:
      loadBalancer:
        servers:
          - url: https://10.10.0.99:8443
    qbittorrent:
      loadBalancer:
        servers:
          - url: http://10.10.0.99:8082
    prx:
      loadBalancer:
        servers:
          - url: https://10.10.0.19:8006
    portainer:
      loadBalancer:
        passHostHeader: false
        servers:
          - url: https://portainer.ingress.kube.local.emilzackrisson.se
    cockpit-docker-01-prod:
      loadBalancer:
        servers:
          - url: http://10.10.0.132:9090
    prowlarr:
      loadBalancer:
        servers:
          - url: http://10.10.0.99:9696
    immich:
      loadBalancer:
        servers:
          - url: http://10.10.0.20:2283
    kasm:
      loadBalancer:
        servers:
          - url: http://10.10.0.20:6333
    dufs:
      loadBalancer:
        servers:
          - url: http://10.10.0.99:5000
    home:
      loadBalancer:
        passHostHeader: false
        servers:
          - url: https://homepage.ingress.kube.local.emilzackrisson.se
    radarr:
      loadBalancer:
        servers:
          - url: http://10.10.0.99:7878
    sonarr:
      loadBalancer:
        servers:
          - url: http://10.10.0.99:8989
    bazarr:
      loadBalancer:
        servers:
          - url: http://10.10.0.99:6767
    whoami:
      loadBalancer:
        servers:
          - url: http://10.10.0.8:8054
    calibre-web:
      loadBalancer:
        servers:
          - url: http://10.10.0.20:8087
    penpot:
      loadBalancer:
        servers:
          - url: http://10.10.0.99:9002
    infisical:
      loadBalancer:
        servers:
          - url: http://10.10.0.99:8085
    cockpit-docker:
      loadBalancer:
        servers:
          - url: https://10.10.0.99:9090
    lyckebyansfvo:
      loadBalancer:
        passHostHeader: false
        servers:
          - url: https://lyckebyansfvo.ingress.kube.local.emilzackrisson.se
    powerdns-admin:
      loadBalancer:
        servers:
          - url: http://10.10.0.99:5380
  middlewares:
    securityHeaders:
      headers:
        customResponseHeaders:
          X-Robots-Tag: none,noarchive,nosnippet,notranslate,noimageindex,noindex,nofollow
          server: ''
          X-Forwarded-Proto: https
        sslProxyHeaders:
          X-Forwarded-Proto: https
        referrerPolicy: strict-origin-when-cross-origin
        hostsProxyHeaders:
          - X-Forwarded-Host
          - X-Forwarded-For
        customRequestHeaders:
          X-Forwarded-Proto: https
        contentTypeNosniff: true
        browserXssFilter: true
        forceSTSHeader: true
        stsIncludeSubdomains: true
        stsSeconds: 63072000
        stsPreload: true
    crowdsec-bouncer:
      forwardauth:
        address: http://bouncer-traefik:8080/api/v1/forwardAuth
        trustForwardHeader: true
tls:
  options:
    default:
      minVersion: VersionTLS12
    mintls13:
      minVersion: VersionTLS13
